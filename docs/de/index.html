<!doctype html>
<html lang="de" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Einstieg | Agent CLI Docs</title>
    <link rel="stylesheet" href="../assets/docs.css" />
  </head>
  <body>
    <div class="layout">
      <aside class="sidebar">
        <div class="brand">Agent CLI Docs</div>
        <p class="hint">Minimal + professional terminal agent</p>
        <nav class="nav"><a class="active" href="./index.html">Einstieg</a>
<a class="" href="./api-examples.html">Skripte</a>
<a class="" href="./config-reference.html">Konfiguration</a></nav>
      </aside>
      <main class="main">
        <div class="topbar">
          <div>
            <h1 class="title">Einstieg</h1>
            <p class="subtitle">Dokumentation im modernen Layout fuer CLI-Workflows.</p>
          </div>
          <div class="controls">
            <button id="nav-toggle" class="mobile-toggle">Menu</button>
            <button id="theme-toggle">Toggle Theme</button>
            <select id="lang-switch" class="lang-select" aria-label="Select language">
              <option value="../index.html">ðŸ‡ºðŸ‡¸ English</option>
<option value="./index.html" selected>ðŸ‡©ðŸ‡ª Deutsch</option>
            </select>
          </div>
        </div>
        <article class="article">
<h1 id="agent-cli-dokumentation">Agent CLI Dokumentation</h1>
<p>Ein Zero-Dependency, Multi-Provider KI-Agent fuer das Terminal. Keine Frameworks, keine Server, keine Datenbanken -- nur Node.js und dein bevorzugter KI-Anbieter.</p>
<h2 id="warum-agent-cli">Warum agent-cli?</h2>
<ul><li>**Zero Dependencies** -- kein <code>node_modules</code>, kein Supply-Chain-Risiko</li><li>**11 Provider** -- Anbieter wechseln mit einer Config-Aenderung</li><li>**Security-first** -- konfigurierbare Befehlsrichtlinien verhindern destruktive Operationen</li><li>**Laeuft ueberall** -- SSH, Container, CI, Remote-Server</li><li>**Lokale Config** -- Credentials bleiben auf deinem Rechner</li></ul>
<h2 id="wie-es-funktioniert">Wie es funktioniert</h2>
<p>agent-cli sendet deinen Prompt an ein KI-Modell ueber die OpenAI-kompatible Chat-Completions-API. Das Modell kann mit reinem Text antworten oder Tool-Calls anfordern. Aktuell unterstuetzt der Agent ein Tool: <code>run_command</code>, das Shell-Befehle ausfuehrt.</p>
<p>Die Ausfuehrung folgt einer agentischen Schleife:</p>
<ol><li>Du sendest einen Prompt</li><li>Das KI-Modell verarbeitet den Prompt</li><li>Wenn das Modell einen Befehl ausfuehren muss, loest es einen <code>run_command</code> Tool-Call aus</li><li>Der Agent prueft den Befehl gegen die Sicherheitsrichtlinien</li><li>Falls erlaubt, fuehrt der Agent den Befehl aus und sendet die Ausgabe zurueck</li><li>Das Modell verarbeitet die Ausgabe und loest weitere Tool-Calls aus oder antwortet mit Text</li><li>Die Schleife laeuft fuer bis zu 5 Runden</li></ol>
<p>Das bedeutet: Die KI kann Dateien inspizieren, Tests ausfuehren, Git-History pruefen und ueber Ergebnisse nachdenken -- alles innerhalb eines einzigen Prompts.</p>
<h2 id="voraussetzungen">Voraussetzungen</h2>
<ul><li>Node.js 18+ (20+ empfohlen)</li><li>Internetzugang fuer Provider-APIs</li><li>Kein <code>npm install</code> erforderlich</li></ul>
<h2 id="installation">Installation</h2>
<pre><code class="language-bash">git clone https://github.com/Ad4m2017/agent-cli.git
cd agent-cli</code></pre>
<p>Kein Build-Schritt. Keine Paketinstallation.</p>
<h2 id="provider-konfigurieren">Provider konfigurieren</h2>
<p>Starte den interaktiven Setup-Wizard:</p>
<pre><code class="language-bash">node agent-connect.js</code></pre>
<p>Im TTY-Terminal: Pfeiltasten und Enter zur Navigation. Der Wizard schreibt:</p>
<ul><li>Runtime-Defaults und Sicherheitsrichtlinie in <code>agent.json</code></li><li>Provider-Credentials in <code>agent.auth.json</code> (Klartext, Dateiberechtigungen auf 0600 gesetzt)</li></ul>
<p>Konfigurationsdateien werden jetzt atomar geschrieben (Temp-Datei + Rename), um das Risiko beschaedigter JSON-Dateien bei Abbruch waehrend des Schreibens zu reduzieren.</p>
<h3 id="direktes-provider-setup">Direktes Provider-Setup</h3>
<pre><code class="language-bash">node agent-connect.js --provider openai
node agent-connect.js --provider copilot
node agent-connect.js --provider groq
node agent-connect.js --provider deepseek
node agent-connect.js --provider mistral
node agent-connect.js --provider openrouter
node agent-connect.js --provider perplexity
node agent-connect.js --provider together
node agent-connect.js --provider fireworks
node agent-connect.js --provider moonshot
node agent-connect.js --provider xai</code></pre>
<h3 id="copilot-setup">Copilot-Setup</h3>
<p>GitHub Copilot nutzt den OAuth Device Flow. Der Wizard wird:</p>
<ol><li>Einen Device-Code generieren</li><li>Dich auffordern, eine URL im Browser zu oeffnen</li><li>Den Code auf GitHub einzugeben</li><li>Automatisch Tokens austauschen, sobald bestaetigt</li></ol>
<p>Copilot-Tokens sind kurzlebig. Der Agent erneuert sie automatisch vor Ablauf.</p>
<h2 id="erster-start">Erster Start</h2>
<pre><code class="language-bash">node agent.js -m &quot;Welche Dateien sind in diesem Verzeichnis?&quot;</code></pre>
<p>Bestimmten Provider und Modell erzwingen:</p>
<pre><code class="language-bash">node agent.js -m &quot;Analysiere dieses Projekt&quot; --model copilot/gpt-4o
node agent.js -m &quot;Erklaere diesen Fehler&quot; --model groq/llama-3.3-70b-versatile</code></pre>
<h2 id="konzepte">Konzepte</h2>
<h3 id="tool-calling">Tool-Calling</h3>
<p>Der Agent stellt dem KI-Modell eine <code>run_command</code>-Tool-Definition bereit. Wenn das Modell entscheidet, dass ein Shell-Befehl bei der Beantwortung hilft, gibt es einen Tool-Call zurueck statt Text. Der Agent fuehrt den Befehl mit <code>execFile</code> aus (nicht <code>exec</code> -- das verhindert Shell-Injection), sendet die Ausgabe zurueck, und das Modell verarbeitet das Ergebnis.</p>
<p>Das erzeugt eine agentische Schleife, in der die KI:</p>
<ul><li>Dateien auflisten und lesen kann</li><li>Tests und Linter ausfuehren kann</li><li>Git-Status und History pruefen kann</li><li>Build-Befehle ausfuehren kann</li><li>Laufende Prozesse inspizieren kann</li></ul>
<p>Die Schleife laeuft fuer bis zu 5 Runden, bevor der Agent eine finale Textantwort erzwingt.</p>
<h3 id="sicherheitsmodi">Sicherheitsmodi</h3>
<p>Jeder Befehl, den die KI ausfuehren moechte, wird gegen eine dreischichtige Sicherheitsrichtlinie in <code>agent.json</code> geprueft:</p>
<p>**Schicht 1: denyCritical** -- blockiert immer katastrophale Befehle, unabhaengig vom Modus:</p>
<ul><li><code>rm -rf /</code></li><li><code>mkfs</code></li><li><code>shutdown</code>, <code>reboot</code>, <code>poweroff</code></li><li><code>dd if=</code></li><li>Pipen von curl/wget in sh/bash</li></ul>
<p>**Schicht 2: Modusspezifische Deny-Regeln** -- blockiert Befehle basierend auf dem aktuellen Modus.</p>
<p>**Schicht 3: Modusspezifische Allow-Regeln** -- nur explizit erlaubte Befehle koennen ausgefuehrt werden.</p>
<p>Auswertungsreihenfolge: denyCritical -&gt; deny -&gt; allow. Ein Befehl muss alle drei Schichten bestehen.</p>
<p>Die drei Modi:</p>
<ul><li>**plan** -- Nur-Lesen-Erkundung. Nur <code>ls</code>, <code>pwd</code>, <code>git status</code>, <code>git log</code>, <code>node -v</code>, <code>npm -v</code> erlaubt. Destruktive Befehle, Paketinstallationen und Pushes sind blockiert.</li><li>**build** (Standard) -- Normale Entwicklung. Git, Node.js, npm, Python, Docker, Make sind erlaubt. <code>rm</code>, <code>sudo</code> und System-Level-Befehle sind blockiert.</li><li>**unsafe** -- Breiter Umfang. Alle Befehle erlaubt ausser <code>denyCritical</code>-Eintraege. Mit Vorsicht verwenden.</li></ul>
<h3 id="freigabemodi-approval">Freigabemodi (Approval)</h3>
<p>Steuert das Human-in-the-Loop-Verhalten fuer die Befehlsausfuehrung:</p>
<ul><li>**ask** (Standard) -- Der Agent fragt vor jedem Befehl: <code>Approve? [y/N]</code>. Erfordert ein TTY-Terminal. Das ist der sicherste Modus fuer interaktive Nutzung.</li><li>**auto** -- Fuehrt richtlinienkonforme Befehle sofort ohne Nachfrage aus. Erforderlich fuer CI/CD und Scripting. Mit <code>--json</code> fuer Automation verwenden.</li><li>**never** -- Blockiert jede Befehlsausfuehrung. Die KI kann nur mit Text antworten, nie Befehle ausfuehren.</li></ul>
<h3 id="tools-modi">Tools-Modi</h3>
<p>Steuert, ob Tool-Calling-Payloads in API-Anfragen enthalten sind:</p>
<ul><li>**auto** (Standard) -- Sendet Tool-Definitionen an das Modell. Wenn das Modell sie ablehnt (z.B. Perplexity-Modelle), automatischer Retry ohne Tools.</li><li>**on** -- Sendet immer Tool-Definitionen. Gibt <code>TOOLS_NOT_SUPPORTED</code>-Fehler zurueck wenn das Modell sie nicht verarbeiten kann.</li><li>**off** -- Sendet nie Tool-Definitionen. Die KI antwortet nur mit Text.</li></ul>
<p><code>--no-tools</code> als Abkuerzung fuer <code>--tools off</code> verwenden.</p>
<h3 id="provider">Provider</h3>
<p>Alle Provider ausser Copilot nutzen den Standard-OpenAI-kompatiblen <code>/chat/completions</code>-Endpoint. Das bedeutet: jeder OpenAI-kompatible Dienst funktioniert.</p>
<ul><li>**openai** -- gpt-4.1-mini, gpt-4.1, gpt-4o, gpt-4o-mini, gpt-5-mini</li><li>**copilot** -- GitHub Copilot via OAuth Device Flow</li><li>**deepseek** -- deepseek-chat, deepseek-reasoner, deepseek-v3</li><li>**groq** -- llama-3.3-70b-versatile, llama-3.1-8b-instant, mixtral-8x7b-32768</li><li>**mistral** -- mistral-small-latest, mistral-medium-latest, mistral-large-latest</li><li>**openrouter** -- Jedes auf OpenRouter verfuegbare Modell</li><li>**perplexity** -- sonar, sonar-pro, sonar-reasoning, sonar-reasoning-pro</li><li>**together** -- Llama-3.1-70B-Instruct-Turbo, Qwen2.5-72B-Instruct-Turbo</li><li>**fireworks** -- llama-v3p1-8b-instruct, qwen2p5-72b-instruct</li><li>**moonshot** -- moonshot-v1-8k, moonshot-v1-32k, moonshot-v1-128k</li><li>**xai** -- grok-2-latest, grok-2-mini-latest, grok-beta</li></ul>
<h3 id="datei--und-bild-anhaenge">Datei- und Bild-Anhaenge</h3>
<p>Dateien und Bilder als Kontext fuer die KI anhaengen:</p>
<pre><code class="language-bash">node agent.js -m &quot;Pruefe diese Datei&quot; --file src/app.ts
node agent.js -m &quot;Beschreibe dieses UI&quot; --model openai/gpt-4o --image screenshot.png
node agent.js -m &quot;Vergleiche diese&quot; --file a.js --file b.js</code></pre>
<p>Limits:</p>
<ul><li>Dateien: max 10, max 200KB je Datei, muss UTF-8-Text sein</li><li>Bilder: max 5, max 5MB je Bild, Formate: <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, <code>.webp</code></li><li>Bilder erfordern ein Vision-faehiges Modell (gpt-4o, gpt-4.1, gpt-5, Gemini). Text-only-Modelle geben <code>VISION_NOT_SUPPORTED</code> zurueck.</li></ul>
<h2 id="anwendungsbeispiele">Anwendungsbeispiele</h2>
<h3 id="codebase-erkunden">Codebase erkunden</h3>
<pre><code class="language-bash">node agent.js -m &quot;Was macht dieses Projekt? Fasse die Architektur zusammen.&quot;</code></pre>
<h3 id="tests-ausfuehren-und-fehler-analysieren">Tests ausfuehren und Fehler analysieren</h3>
<pre><code class="language-bash">node agent.js -m &quot;Fuehre npm test aus und erklaere eventuelle Fehler&quot; --approval auto --mode build</code></pre>
<h3 id="bestimmte-datei-reviewen">Bestimmte Datei reviewen</h3>
<pre><code class="language-bash">node agent.js -m &quot;Pruefe diese Datei auf Bugs&quot; --file src/utils.js --no-tools</code></pre>
<h3 id="verschiedene-provider-fuer-verschiedene-aufgaben">Verschiedene Provider fuer verschiedene Aufgaben</h3>
<pre><code class="language-bash"># Schnelles Reasoning
node agent.js -m &quot;Erklaere diesen Fehler&quot; --model groq/llama-3.3-70b-versatile --no-tools

# Suche-basierte Antworten
node agent.js -m &quot;Neueste Node.js Security-Patches?&quot; --model perplexity/sonar --no-tools

# Voller Agent-Modus
node agent.js -m &quot;Behebe den fehlschlagenden Test&quot; --model openai/gpt-4.1 --approval auto</code></pre>
<h3 id="json-ausgabe-fuer-scripting">JSON-Ausgabe fuer Scripting</h3>
<pre><code class="language-bash">node agent.js -m &quot;Tests ausfuehren&quot; --json --approval auto --mode build</code></pre>
<h2 id="cli-referenz">CLI-Referenz</h2>
<pre><code class="language-text">node agent.js -m &quot;nachricht&quot; [optionen]

Optionen:
  -m, --message &lt;text&gt;   Prompt ans Modell (erforderlich)
  --model &lt;provider/model|model&gt;
  --config &lt;pfad&gt;        Pfad zu agent.json (Standard: ./agent.json)
  --auth-config &lt;pfad&gt;   Pfad zu agent.auth.json (Standard: ./agent.auth.json)
  --json
  --mode &lt;plan|build|unsafe&gt;
  --approval &lt;ask|auto|never&gt;
  --tools &lt;auto|on|off&gt;
  --no-tools
  --file &lt;pfad&gt;          (wiederholbar)
  --image &lt;pfad&gt;         (wiederholbar)
  --yes                  Alias fuer --approval auto
  --unsafe               Unsafe-Modus erzwingen
  --log                  Fehler-Logging aktivieren
  --log-file &lt;pfad&gt;      Standard: ./agent.js.log
  --verbose              Zusaetzliche Laufzeitdiagnostik
  --debug                Detaillierte Diagnostik (impliziert --verbose)
  --stream               Assistant-Text streamen wenn unterstuetzt (deaktiviert bei --json und Tool-Turns)
  --command-timeout &lt;ms&gt; Tool-Command-Timeout in Millisekunden
  --allow-insecure-http  Nicht-lokale HTTP Provider-Base-URLs erlauben
  --help
  --version</code></pre>
<p>Wenn <code>-m/--message</code> fehlt, wird der Prompt aus stdin gelesen:</p>
<pre><code class="language-bash">cat prompt.txt | node agent.js --approval auto</code></pre>
<pre><code class="language-text">node agent-connect.js [--provider &lt;name&gt;] [--config &lt;path&gt;] [--auth-config &lt;path&gt;] [--help] [--version]</code></pre>
<h2 id="fehlerbehebung">Fehlerbehebung</h2>
<ul><li><code>PROVIDER_NOT_CONFIGURED</code>: <code>node agent-connect.js --provider &lt;name&gt;</code> ausfuehren</li><li><code>INTERACTIVE_APPROVAL_JSON</code>: <code>--approval auto</code> oder <code>--approval never</code> mit <code>--json</code> verwenden</li><li><code>INTERACTIVE_APPROVAL_TTY</code>: Interaktives Terminal nutzen oder <code>--approval auto</code> verwenden</li><li><code>VISION_NOT_SUPPORTED</code>: Vision-Modell (gpt-4o, gpt-4.1) verwenden oder <code>--image</code> entfernen</li><li><code>TOOLS_NOT_SUPPORTED</code>: <code>--tools auto</code> oder <code>--no-tools</code> verwenden</li><li><code>FETCH_TIMEOUT</code>: Provider-Anfrage hat Timeout erreicht</li><li><code>RETRY_EXHAUSTED</code>: Retries bei transienten Provider-Fehlern ausgeschopft</li><li><code>INSECURE_BASE_URL</code>: Oeffentliche HTTP-Base-URL abgelehnt (HTTPS, lokalen/privaten Host oder <code>--allow-insecure-http</code> nutzen)</li><li><code>INVALID_BASE_URL</code>: Provider-Base-URL ist ungueltig oder nutzt ein nicht unterstuetztes Protokoll</li><li><code>COPILOT_DEVICE_CODE_EXPIRED</code>: <code>node agent-connect.js --provider copilot</code> erneut ausfuehren</li><li><code>ATTACHMENT_TOO_LARGE</code>: Datei ueberschreitet 200KB oder Bild ueberschreitet 5MB</li><li><code>AUTH_CONFIG_INVALID</code>: <code>agent.auth.json</code> loeschen und <code>node agent-connect.js</code> erneut ausfuehren</li></ul>
<p>Exit-Code-Mapping fuer CI/CD:</p>
<ul><li><code>1</code> generischer Laufzeit-/Connect-Fehler</li><li><code>2</code> agent-config Fehler (<code>agent.json</code>)</li><li><code>3</code> auth-config Fehler (<code>agent.auth.json</code>)</li><li><code>4</code> Provider-Konfigurations-/Auswahlfehler</li><li><code>5</code> interaktiver Approval-Constraint-Fehler</li><li><code>6</code> Provider-Capability-/Copilot-Flow-Fehler</li><li><code>7</code> Fetch-Timeout</li><li><code>8</code> Retry ausgeschopft</li><li><code>9</code> Attachment-Validierungsfehler</li></ul>
        </article>
      </main>
      <aside class="right">
        <div class="toc-title">On This Page</div>
        <nav class="toc"><a href="#warum-agent-cli">Warum agent-cli?</a>
<a href="#wie-es-funktioniert">Wie es funktioniert</a>
<a href="#voraussetzungen">Voraussetzungen</a>
<a href="#installation">Installation</a>
<a href="#provider-konfigurieren">Provider konfigurieren</a>
<a style="padding-left:12px" href="#direktes-provider-setup">Direktes Provider-Setup</a>
<a style="padding-left:12px" href="#copilot-setup">Copilot-Setup</a>
<a href="#erster-start">Erster Start</a>
<a href="#konzepte">Konzepte</a>
<a style="padding-left:12px" href="#tool-calling">Tool-Calling</a>
<a style="padding-left:12px" href="#sicherheitsmodi">Sicherheitsmodi</a>
<a style="padding-left:12px" href="#freigabemodi-approval">Freigabemodi (Approval)</a>
<a style="padding-left:12px" href="#tools-modi">Tools-Modi</a>
<a style="padding-left:12px" href="#provider">Provider</a>
<a style="padding-left:12px" href="#datei--und-bild-anhaenge">Datei- und Bild-Anhaenge</a>
<a href="#anwendungsbeispiele">Anwendungsbeispiele</a>
<a style="padding-left:12px" href="#codebase-erkunden">Codebase erkunden</a>
<a style="padding-left:12px" href="#tests-ausfuehren-und-fehler-analysieren">Tests ausfuehren und Fehler analysieren</a>
<a style="padding-left:12px" href="#bestimmte-datei-reviewen">Bestimmte Datei reviewen</a>
<a style="padding-left:12px" href="#verschiedene-provider-fuer-verschiedene-aufgaben">Verschiedene Provider fuer verschiedene Aufgaben</a>
<a style="padding-left:12px" href="#json-ausgabe-fuer-scripting">JSON-Ausgabe fuer Scripting</a>
<a href="#cli-referenz">CLI-Referenz</a>
<a href="#fehlerbehebung">Fehlerbehebung</a></nav>
      </aside>
    </div>
    <script src="../assets/docs.js"></script>
  </body>
</html>