<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Get Started | Agent CLI Docs</title>
    <link rel="stylesheet" href="./assets/docs.css" />
  </head>
  <body>
    <div class="layout">
      <aside class="sidebar">
        <div class="brand">Agent CLI Docs</div>
        <p class="hint">Minimal + professional terminal agent</p>
        <nav class="nav"><a class="active" href="./index.html">Get Started</a>
<a class="" href="./api-examples.html">Scripts</a>
<a class="" href="./config-reference.html">Config</a></nav>
      </aside>
      <main class="main">
        <div class="topbar">
          <div>
            <h1 class="title">Get Started</h1>
            <p class="subtitle">Documentation in a modern docs layout for CLI workflows.</p>
          </div>
          <div class="controls">
            <button id="nav-toggle" class="mobile-toggle">Menu</button>
            <button id="theme-toggle" aria-label="Toggle Theme"><svg id="theme-icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></svg><svg id="theme-icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></button>
            <select id="lang-switch" class="lang-select" aria-label="Select language">
              <option value="./index.html" selected>ðŸ‡ºðŸ‡¸ English</option>
<option value="./de/index.html">ðŸ‡©ðŸ‡ª Deutsch</option>
            </select>
          </div>
        </div>
        <article class="article">
<h1 id="agent-cli-documentation">Agent CLI Documentation</h1>
<p>A zero-dependency, multi-provider AI agent for the terminal. No frameworks, no servers, no databases -- just Node.js and your preferred AI provider.</p>
<h2 id="why-agent-cli">Why agent-cli?</h2>
<ul><li><strong>Zero dependencies</strong> -- no <code>node_modules</code>, no supply-chain risk</li><li><strong>11 providers</strong> -- switch providers with one config change</li><li><strong>Security-first</strong> -- configurable command policies prevent destructive operations</li><li><strong>Works everywhere</strong> -- SSH, containers, CI, remote servers</li><li><strong>Local-only</strong> -- credentials stay on your machine</li></ul>
<h2 id="how-it-works">How It Works</h2>
<p>agent-cli sends your prompt to an AI model via the OpenAI-compatible chat completions API. The model can respond with plain text or request tool calls. Currently, the agent supports one tool: <code>run_command</code>, which executes shell commands.</p>
<p>The execution follows an agentic loop:</p>
<ol><li>You send a prompt</li><li>The AI model processes the prompt</li><li>If the model needs to run a command, it issues a <code>run_command</code> tool call</li><li>The agent checks the command against security policies</li><li>If allowed, the agent executes the command and sends the output back</li><li>The model processes the output and either issues more tool calls or responds with text</li><li>The loop continues for up to 5 turns</li></ol>
<p>This means the AI can inspect files, run tests, check git history, and reason about results -- all within a single prompt.</p>
<h2 id="requirements">Requirements</h2>
<ul><li>Node.js 18+ (20+ recommended)</li><li>Internet access for provider APIs</li><li>No <code>npm install</code> required</li></ul>
<h2 id="installation">Installation</h2>
<pre><code class="language-bash">git clone https://github.com/Ad4m2017/agent-cli.git
cd agent-cli</code></pre>
<p>No build step. No package installation.</p>
<h2 id="configure-a-provider">Configure a Provider</h2>
<p>Run the interactive setup wizard:</p>
<pre><code class="language-bash">node agent-connect.js</code></pre>
<p>In TTY terminals, use arrow keys and Enter to navigate menus. The wizard writes:</p>
<ul><li>Runtime defaults and security policy to <code>agent.json</code></li><li>Provider credentials to <code>agent.auth.json</code> (plaintext, file permissions set to 0600)</li></ul>
<p>Wizard behavior includes:</p>
<ul><li>Provider status labels (<code>installed</code>, <code>installed, default</code>, <code>not configured</code>)</li><li>Top-level quick action: <code>Set default provider/model only</code></li><li>Optional model refresh via live provider <code>/models</code></li><li>Optional fallback model list loading from <code>models.dev</code></li><li>Provider source option: <code>Load provider from models.dev...</code> (imports provider API URL and model candidates)</li><li>Paged list navigation for long menus (<code>n</code>/<code>p</code> jump by 10)</li></ul>
<p>Config files are now written atomically (temp file + rename) to reduce risk of corrupted JSON if a process is interrupted during write.</p>
<h3 id="direct-provider-setup">Direct Provider Setup</h3>
<pre><code class="language-bash">node agent-connect.js --provider openai
node agent-connect.js --provider copilot
node agent-connect.js --provider groq
node agent-connect.js --provider deepseek
node agent-connect.js --provider mistral
node agent-connect.js --provider openrouter
node agent-connect.js --provider perplexity
node agent-connect.js --provider together
node agent-connect.js --provider fireworks
node agent-connect.js --provider moonshot
node agent-connect.js --provider xai
node agent-connect.js --provider ollama
node agent-connect.js --provider lmstudio</code></pre>
<h3 id="copilot-setup">Copilot Setup</h3>
<p>GitHub Copilot uses OAuth device flow. The wizard will:</p>
<ol><li>Generate a device code</li><li>Ask you to open a URL in your browser</li><li>Enter the code on GitHub</li><li>Automatically exchange tokens once confirmed</li></ol>
<p>Copilot tokens are short-lived. The agent refreshes them automatically before expiry.</p>
<h2 id="first-run">First Run</h2>
<pre><code class="language-bash">node agent.js -m &quot;What files are in this directory?&quot;</code></pre>
<p>Force a specific provider and model:</p>
<pre><code class="language-bash">node agent.js -m &quot;Analyze this project&quot; --model copilot/gpt-4o
node agent.js -m &quot;Explain this error&quot; --model groq/llama-3.3-70b-versatile</code></pre>
<h2 id="concepts">Concepts</h2>
<h3 id="tool-calling">Tool Calling</h3>
<p>The agent provides the AI model with a <code>run_command</code> tool definition. When the model decides a shell command would help answer your question, it returns a tool call instead of text. The agent executes the command using <code>execFile</code> (not <code>exec</code> -- this prevents shell injection), sends the output back, and the model incorporates the result.</p>
<p>This creates an agentic loop where the AI can:</p>
<ul><li>List and read files</li><li>Run tests and linters</li><li>Check git status and history</li><li>Execute build commands</li><li>Inspect running processes</li></ul>
<p>The loop runs for up to 5 turns before the agent forces a final text response.</p>
<h3 id="security-modes">Security Modes</h3>
<p>Every command the AI wants to execute is checked against a three-layer security policy defined in <code>agent.json</code>:</p>
<p><strong>Layer 1: denyCritical</strong> -- always blocks catastrophic commands regardless of mode:</p>
<ul><li><code>rm -rf /</code></li><li><code>mkfs</code></li><li><code>shutdown</code>, <code>reboot</code>, <code>poweroff</code></li><li><code>dd if=</code></li><li>Piping curl/wget into sh/bash</li></ul>
<p><strong>Layer 2: Mode-specific deny rules</strong> -- blocks commands based on current mode.</p>
<p><strong>Layer 3: Mode-specific allow rules</strong> -- only explicitly allowed commands can run.</p>
<p>Evaluation order: denyCritical -&gt; deny -&gt; allow. A command must pass all three layers.</p>
<p>The three modes:</p>
<ul><li><strong>plan</strong> -- Read-only exploration. Only <code>ls</code>, <code>pwd</code>, <code>git status</code>, <code>git log</code>, <code>node -v</code>, <code>npm -v</code> are allowed. Destructive commands, package installs, and pushes are blocked.</li><li><strong>build</strong> (default) -- Normal development. Git, Node.js, npm, Python, Docker, Make are allowed. <code>rm</code>, <code>sudo</code>, and system-level commands are blocked.</li><li><strong>unsafe</strong> -- Broad scope. All commands allowed except <code>denyCritical</code> items. Use with caution.</li></ul>
<h3 id="approval-modes">Approval Modes</h3>
<p>Controls human-in-the-loop behavior for command execution:</p>
<ul><li><strong>ask</strong> (default) -- The agent prompts you before every command: <code>Approve? [y/N]</code>. Requires a TTY terminal. This is the safest mode for interactive use.</li><li><strong>auto</strong> -- Executes policy-allowed commands immediately without prompting. Required for CI/CD and scripting. Use with <code>--json</code> for automation.</li><li><strong>never</strong> -- Blocks all command execution. The AI can only respond with text, never run commands.</li></ul>
<h3 id="tools-modes">Tools Modes</h3>
<p>Controls whether tool-calling payloads are included in API requests:</p>
<ul><li><strong>auto</strong> (default) -- Sends tool definitions to the model. If the model rejects them (e.g., Perplexity models), automatically retries without tools.</li><li><strong>on</strong> -- Always sends tool definitions. Returns <code>TOOLS_NOT_SUPPORTED</code> error if the model cannot handle them.</li><li><strong>off</strong> -- Never sends tool definitions. The AI responds with text only.</li></ul>
<p>Use <code>--no-tools</code> as a shorthand for <code>--tools off</code>.</p>
<h3 id="providers">Providers</h3>
<p>All providers except Copilot use the standard OpenAI-compatible <code>/chat/completions</code> endpoint. This means any OpenAI-compatible service works.</p>
<ul><li><strong>openai</strong> -- gpt-4.1-mini, gpt-4.1, gpt-4o, gpt-4o-mini, gpt-5-mini</li><li><strong>copilot</strong> -- GitHub Copilot via OAuth device flow</li><li><strong>deepseek</strong> -- deepseek-chat, deepseek-reasoner, deepseek-v3</li><li><strong>groq</strong> -- llama-3.3-70b-versatile, llama-3.1-8b-instant, mixtral-8x7b-32768</li><li><strong>mistral</strong> -- mistral-small-latest, mistral-medium-latest, mistral-large-latest</li><li><strong>openrouter</strong> -- Any model available on OpenRouter</li><li><strong>perplexity</strong> -- sonar, sonar-pro, sonar-reasoning, sonar-reasoning-pro</li><li><strong>together</strong> -- Llama-3.1-70B-Instruct-Turbo, Qwen2.5-72B-Instruct-Turbo</li><li><strong>fireworks</strong> -- llama-v3p1-8b-instruct, qwen2p5-72b-instruct</li><li><strong>moonshot</strong> -- moonshot-v1-8k, moonshot-v1-32k, moonshot-v1-128k</li><li><strong>xai</strong> -- grok-2-latest, grok-2-mini-latest, grok-beta</li></ul>
<h3 id="file-and-image-attachments">File and Image Attachments</h3>
<p>Attach files and images as context for the AI:</p>
<pre><code class="language-bash">node agent.js -m &quot;Review this file&quot; --file src/app.ts
node agent.js -m &quot;Describe this UI&quot; --model openai/gpt-4o --image screenshot.png
node agent.js -m &quot;Compare these&quot; --file a.js --file b.js</code></pre>
<p>Limits:</p>
<ul><li>By default, there are no hardcoded attachment limits.</li><li>Configure optional limits with <code>--max-file-bytes</code>, <code>--max-image-bytes</code>, <code>--max-files</code>, <code>--max-images</code>.</li><li>Validation is strict: values must be integers <code>&gt;= 0</code>; <code>0</code> means unlimited.</li><li>Files must still be UTF-8 text.</li><li>Images formats: <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, <code>.webp</code>.</li><li>Images require a vision-capable model (gpt-4o, gpt-4.1, gpt-5, Gemini). Text-only models return <code>VISION_NOT_SUPPORTED</code>.</li></ul>
<h2 id="usage-examples">Usage Examples</h2>
<h3 id="explore-a-codebase">Explore a codebase</h3>
<pre><code class="language-bash">node agent.js -m &quot;What does this project do? Summarize the architecture.&quot;</code></pre>
<h3 id="run-tests-and-analyze-failures">Run tests and analyze failures</h3>
<pre><code class="language-bash">node agent.js -m &quot;Run npm test and explain any failures&quot; --approval auto --mode build</code></pre>
<h3 id="review-a-specific-file">Review a specific file</h3>
<pre><code class="language-bash">node agent.js -m &quot;Review this file for bugs&quot; --file src/utils.js --no-tools</code></pre>
<h3 id="use-different-providers-for-different-tasks">Use different providers for different tasks</h3>
<pre><code class="language-bash"># Fast reasoning
node agent.js -m &quot;Explain this error&quot; --model groq/llama-3.3-70b-versatile --no-tools

# Search-augmented answers
node agent.js -m &quot;Latest Node.js security patches?&quot; --model perplexity/sonar --no-tools

# Full agent mode
node agent.js -m &quot;Fix the failing test&quot; --model openai/gpt-4.1 --approval auto</code></pre>
<h3 id="json-output-for-scripting">JSON output for scripting</h3>
<pre><code class="language-bash">node agent.js -m &quot;Run tests&quot; --json --approval auto --mode build</code></pre>
<h2 id="cli-reference">CLI Reference</h2>
<pre><code class="language-text">node agent.js -m &quot;message&quot; [options]

Options:
  -m, --message &lt;text&gt;   Model prompt (required)
  --model &lt;provider/model|model&gt;
  --config &lt;path&gt;        Path to agent.json (default: ./agent.json)
  --auth-config &lt;path&gt;   Path to agent.auth.json (default: ./agent.auth.json)
  --json
  --mode &lt;plan|build|unsafe&gt;
  --approval &lt;ask|auto|never&gt;
  --tools &lt;auto|on|off&gt;
  --no-tools
  --file &lt;path&gt;          (repeatable)
  --image &lt;path&gt;         (repeatable)
  --system-prompt &lt;text&gt; Optional system prompt (empty disables system role)
  --max-file-bytes &lt;n&gt;   Integer &gt;= 0, 0 = unlimited
  --max-image-bytes &lt;n&gt;  Integer &gt;= 0, 0 = unlimited
  --max-files &lt;n&gt;        Integer &gt;= 0, 0 = unlimited
  --max-images &lt;n&gt;       Integer &gt;= 0, 0 = unlimited
  --yes                  Alias for --approval auto
  --stats                Show local usage stats from .agent-usage.ndjson
  --unsafe               Force unsafe mode
  --log                  Enable error logging
  --log-file &lt;path&gt;      Default: ./agent.js.log
  --verbose              Additional runtime diagnostics
  --debug                Detailed diagnostics (implies --verbose)
  --stream               Stream assistant text when supported (disabled in --json and tool turns)
  --command-timeout &lt;ms&gt; Tool command timeout in milliseconds
  --allow-insecure-http  Allow non-local HTTP provider base URLs
  --help
  --version</code></pre>
<p>Usage stats are opt-in via <code>runtime.usageStats.enabled=true</code> in <code>agent.json</code>.</p>
<p>If <code>-m/--message</code> is omitted, the prompt is read from stdin:</p>
<pre><code class="language-bash">cat prompt.txt | node agent.js --approval auto</code></pre>
<pre><code class="language-text">node agent-connect.js [--provider &lt;name&gt;] [--config &lt;path&gt;] [--auth-config &lt;path&gt;] [--help] [--version]</code></pre>
<h2 id="troubleshooting">Troubleshooting</h2>
<ul><li><code>PROVIDER_NOT_CONFIGURED</code>: Run <code>node agent-connect.js --provider &lt;name&gt;</code></li><li><code>INTERACTIVE_APPROVAL_JSON</code>: Use <code>--approval auto</code> or <code>--approval never</code> with <code>--json</code></li><li><code>INTERACTIVE_APPROVAL_TTY</code>: Run in an interactive terminal or use <code>--approval auto</code></li><li><code>VISION_NOT_SUPPORTED</code>: Use a vision model (gpt-4o, gpt-4.1) or remove <code>--image</code></li><li><code>TOOLS_NOT_SUPPORTED</code>: Use <code>--tools auto</code> or <code>--no-tools</code></li><li><code>FETCH_TIMEOUT</code>: Provider request exceeded timeout</li><li><code>RETRY_EXHAUSTED</code>: Retries on transient provider failures were exhausted</li><li><code>INSECURE_BASE_URL</code>: Public HTTP base URL rejected (use HTTPS, local/private host, or <code>--allow-insecure-http</code>)</li><li><code>INVALID_BASE_URL</code>: Provider base URL is malformed or uses an unsupported protocol</li><li><code>COPILOT_DEVICE_CODE_EXPIRED</code>: Re-run <code>node agent-connect.js --provider copilot</code></li><li><code>ATTACHMENT_LIMIT_INVALID</code>: Invalid limit value (must be integer &gt;= 0)</li><li><code>ATTACHMENT_TOO_LARGE</code>: Attachment exceeds configured byte limit</li><li><code>AUTH_CONFIG_INVALID</code>: Delete <code>agent.auth.json</code> and re-run <code>node agent-connect.js</code></li></ul>
<p>Exit code mapping for CI/CD:</p>
<ul><li><code>1</code> generic runtime/connect error</li><li><code>2</code> agent config error (<code>agent.json</code>)</li><li><code>3</code> auth config error (<code>agent.auth.json</code>)</li><li><code>4</code> provider configuration/selection error</li><li><code>5</code> interactive approval constraint error</li><li><code>6</code> provider capability / copilot flow error</li><li><code>7</code> fetch timeout</li><li><code>8</code> retry exhausted</li><li><code>9</code> attachment validation error</li></ul>
        </article>
      </main>
      <aside class="right">
        <div class="toc-title">On This Page</div>
        <nav class="toc"><a href="#why-agent-cli">Why agent-cli?</a>
<a href="#how-it-works">How It Works</a>
<a href="#requirements">Requirements</a>
<a href="#installation">Installation</a>
<a href="#configure-a-provider">Configure a Provider</a>
<a class="sub-item" href="#direct-provider-setup">Direct Provider Setup</a>
<a class="sub-item" href="#copilot-setup">Copilot Setup</a>
<a href="#first-run">First Run</a>
<a href="#concepts">Concepts</a>
<a class="sub-item" href="#tool-calling">Tool Calling</a>
<a class="sub-item" href="#security-modes">Security Modes</a>
<a class="sub-item" href="#approval-modes">Approval Modes</a>
<a class="sub-item" href="#tools-modes">Tools Modes</a>
<a class="sub-item" href="#providers">Providers</a>
<a class="sub-item" href="#file-and-image-attachments">File and Image Attachments</a>
<a href="#usage-examples">Usage Examples</a>
<a class="sub-item" href="#explore-a-codebase">Explore a codebase</a>
<a class="sub-item" href="#run-tests-and-analyze-failures">Run tests and analyze failures</a>
<a class="sub-item" href="#review-a-specific-file">Review a specific file</a>
<a class="sub-item" href="#use-different-providers-for-different-tasks">Use different providers for different tasks</a>
<a class="sub-item" href="#json-output-for-scripting">JSON output for scripting</a>
<a href="#cli-reference">CLI Reference</a>
<a href="#troubleshooting">Troubleshooting</a></nav>
      </aside>
    </div>
    <script src="./assets/docs.js"></script>
  </body>
</html>